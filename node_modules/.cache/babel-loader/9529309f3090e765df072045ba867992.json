{"remainingRequest":"/home/deimos/Desktop/habitica-parser/habitica-parser/node_modules/babel-loader/lib/index.js!/home/deimos/Desktop/habitica-parser/habitica-parser/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/deimos/Desktop/habitica-parser/habitica-parser/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/deimos/Desktop/habitica-parser/habitica-parser/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/deimos/Desktop/habitica-parser/habitica-parser/src/components/Main.vue?vue&type=template&id=54d3a52e&scoped=true","dependencies":[{"path":"/home/deimos/Desktop/habitica-parser/habitica-parser/src/components/Main.vue","mtime":1614815201522},{"path":"/home/deimos/Desktop/habitica-parser/habitica-parser/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/deimos/Desktop/habitica-parser/habitica-parser/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/deimos/Desktop/habitica-parser/habitica-parser/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/home/deimos/Desktop/habitica-parser/habitica-parser/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/deimos/Desktop/habitica-parser/habitica-parser/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB2TW9kZWxUZXh0IGFzIF92TW9kZWxUZXh0LCB3aXRoRGlyZWN0aXZlcyBhcyBfd2l0aERpcmVjdGl2ZXMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtNTRkM2E1MmUiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTU0ZDNhNTJlIik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogIm1haW4iCn07Cgp2YXIgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImgxIiwgbnVsbCwgIkhhYml0aWNhIFBhcnNlciIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8zID0gewogIGNsYXNzOiAiZm9ybSIKfTsKCnZhciBfaG9pc3RlZF80ID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgibGFiZWwiLCB7CiAgZm9yOiAibmFtZSIKfSwgIlVzZXIgSUQiLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNSA9IHsKICBjbGFzczogImZvcm0iCn07Cgp2YXIgX2hvaXN0ZWRfNiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImxhYmVsIiwgewogIGZvcjogIm5hbWUiCn0sICJVc2VyIEFQSSBUb2tlbiIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF83ID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiZGl2IiwgewogIGlkOiAiY2hhcnQiCn0sIG51bGwsIC0xCi8qIEhPSVNURUQgKi8KKTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX0ZyYWdtZW50LCBudWxsLCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2hvaXN0ZWRfMiwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBbX2hvaXN0ZWRfNCwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAidGV4dCIsCiAgICBjbGFzczogImZvcm0tY29udHJvbCIsCiAgICBpZDogInVzZXItaWQiLAogICAgcmVxdWlyZWQ6ICIiLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuIF9jdHgudXNlcmlkID0gJGV2ZW50OwogICAgfSksCiAgICBuYW1lOiAidXNlci1pZCIKICB9LCBudWxsLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdk1vZGVsVGV4dCwgX2N0eC51c2VyaWRdXSldKSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF81LCBbX2hvaXN0ZWRfNiwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAicGFzc3dvcmQiLAogICAgY2xhc3M6ICJmb3JtLWNvbnRyb2wiLAogICAgaWQ6ICJ1c2VyYXBpIiwKICAgIHJlcXVpcmVkOiAiIiwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiBfY3R4LnVzZXJhcGkgPSAkZXZlbnQ7CiAgICB9KSwKICAgIG5hbWU6ICJ1c2VyYXBpIgogIH0sIG51bGwsIDUxMgogIC8qIE5FRURfUEFUQ0ggKi8KICApLCBbW192TW9kZWxUZXh0LCBfY3R4LnVzZXJhcGldXSldKV0pLCBfY3JlYXRlVk5vZGUoImJ1dHRvbiIsIHsKICAgIG9uQ2xpY2s6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJG9wdGlvbnMuU3VibWl0ICYmICRvcHRpb25zLlN1Ym1pdC5hcHBseSgkb3B0aW9ucywgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgIlN1Ym1pdCIpLCBfaG9pc3RlZF83XSwgNjQKICAvKiBTVEFCTEVfRlJBR01FTlQgKi8KICApOwp9KTs="},{"version":3,"sources":["/home/deimos/Desktop/habitica-parser/habitica-parser/src/components/Main.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,KAAK,EAAE;;;8BACV,YAAA,CAAwB,IAAxB,EAAwB,IAAxB,EAAI,iBAAJ,EAAmB,CAAA;AAAA;AAAnB,C;;;AAGI,EAAA,KAAK,EAAC;;;8BACR,YAAA,CAAiC,OAAjC,EAAiC;AAA1B,EAAA,GAAG,EAAC;AAAsB,CAAjC,EAAkB,SAAlB,EAAyB,CAAA;AAAA;AAAzB,C;;;AAOG,EAAA,KAAK,EAAC;;;8BACT,YAAA,CAAwC,OAAxC,EAAwC;AAAjC,EAAA,GAAG,EAAC;AAA6B,CAAxC,EAAkB,gBAAlB,EAAgC,CAAA;AAAA;AAAhC,C;;8BAUJ,YAAA,CACM,KADN,EACM;AADD,EAAA,EAAE,EAAC;AACF,CADN,EAAe,IAAf,EAAe,CAAA;AAAA;AAAf,C;;;;;sDAvBA,YAAA,CAmBM,KAnBN,EAAA,UAAA,EAmBM,CAlBJ,UAkBI,EAfL,YAAA,CAMO,KANP,EAAA,UAAA,EAMO,CALJ,UAKI,E,gBAJJ,YAAA,CAGsB,OAHtB,EAGsB;AAHf,IAAA,IAAI,EAAC,MAGU;AAFf,IAAA,KAAK,EAAC,cAES;AAFM,IAAA,EAAE,EAAC,SAET;AADf,IAAA,QAAQ,EAAR,EACe;;aADG,IAAA,CAAA,MAAA,GAAM,M;MACT;AAAf,IAAA,IAAI,EAAC;AAAU,GAHtB,E,IAAA,E;;AAAA,G,iBAEyB,IAAA,CAAA,M,GAErB,CANP,CAeK,EAPJ,YAAA,CAMM,KANN,EAAA,UAAA,EAMM,CALJ,UAKI,E,gBAJJ,YAAA,CAGsB,OAHtB,EAGsB;AAHf,IAAA,IAAI,EAAC,UAGU;AAFf,IAAA,KAAK,EAAC,cAES;AAFM,IAAA,EAAE,EAAC,SAET;AADf,IAAA,QAAQ,EAAR,EACe;;aADG,IAAA,CAAA,OAAA,GAAO,M;MACV;AAAf,IAAA,IAAI,EAAC;AAAU,GAHtB,E,IAAA,E;;AAAA,G,iBAEyB,IAAA,CAAA,O,GAErB,CANN,CAOI,CAnBN,C,EAqBA,YAAA,CAA2C,QAA3C,EAA2C;AAA9B,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,QAAA,CAAA,MAAA,IAAA,QAAA,CAAA,MAAA,OAAA,QAAA,YAAF;AAAA,KAAA;AAAyB,GAA3C,EAA4B,QAA5B,C,EAEA,U","sourcesContent":["<template>\n  <div class =\"main\">\n    <h1>Habitica Parser</h1>\n   \n   \n   <div class=\"form\">\n      <label for=\"name\">User ID</label>\n      <input type=\"text\"\n             class=\"form-control\" id=\"user-id\"\n             required v-model=\"userid\"\n             name=\"user-id\">\n    </div>\n\n    <div class=\"form\">\n      <label for=\"name\">User API Token</label>\n      <input type=\"password\"\n             class=\"form-control\" id=\"userapi\"\n             required v-model=\"userapi\"\n             name=\"userapi\">\n    </div>\n  </div>\n\n  <button v-on:click=\"Submit\">Submit</button>\n\n  <div id=\"chart\">\n  </div>\n\n</template>\n\n<script>\nimport http from \"../http.js\"\nimport Papa from 'papaparse'\nimport ApexCharts from 'apexcharts'\n\nexport default {\n  name: 'Main',\n  userid: \"\",\n  userapi: \"\",\n  historycsv: \"\",\n  dailies: [],\n\n  methods: {\n    Submit() {\n\n      http.get(\"\",\n              { headers:{\n                'x-client': this.userid+\"-HabiticaParser\",\n                'x-api-user': this.userid,\n                'x-api-key': this.userapi\n                }\n        })\n        .then(response =>{\n          console.log(\"Success\");\n          this.historycsv = response.data\n          this.Show();\n        })\n        .catch(err =>{\n          console.log('GET histoy.csv failed :', err);\n        });\n\n    },\n\n    Show(){\n      // Get Dailies from past 7 days, their title and Ids -->  titles[], dailyIds\n      var historyJson= Papa.parse(this.historycsv,{ delimiter: ',', skipEmptyLines: true }).data;\n      var i;\n      var dailies=[];\n      var dailyIDs=[];\n      var titles=[];\n      for(i = 1; i < historyJson.length; i++){\n        var date = new Date(historyJson[i][3]);\n        if ( historyJson[i][2] == \"daily\"\n            && date > this.pastWeek() ){\n          var daily = historyJson[i];\n          dailies.push(daily);\n          if(dailyIDs.indexOf(daily[1]) == -1){ //If daily's ID not in the list of IDs\n            dailyIDs.push(daily[1]);\n            titles.push(daily[0])\n          }\n        }\n      } \n\n      // Get values of dailies --> values[]\n      var weekDays = this.pastDays();\n      var allValues=[]\n      for (let d in dailyIDs){ // for each different daily IDs\n        var values=[];\n        for(let k in weekDays ){ // for each day of the past week\n          for(let e in dailies){ // for each entry in dailies\n            date = new Date(dailies[e][3]);\n            if( dailies[e][1] == dailyIDs[d]  \n                && this.sameDay(date,weekDays[k]) ){\n                  values.push(Math.round(parseFloat(dailies[e][4])));\n            }\n          }\n        }\n        \n        if(values.length > 0){\n          allValues.push(values);\n          console.log(values)\n        }\n      }\n\n      // Gather relevant info for drawing chart\n      var series=[];\n      for(let d in dailyIDs){\n        var entry={\n          name: titles[d],\n          data: allValues[d]\n        }\n        series.push(entry);\n      }\n\n      var categories=[];\n      for(let k in weekDays){\n        categories.push(this.formatDate(weekDays[k]));\n      }\n\n      var options = {\n        plotOptions: {\n          heatmap: {\n            colorScale: {\n              ranges: [{\n                from: -50,\n                to: -17,\n                color: '#c11916',\n                name: 'extremely low',\n              },\n              {\n                from: -16,\n                to: -9,\n                color: '#ed683c',\n                name: 'very low',\n              },\n              {\n                from: -8,\n                to: -2,\n                color: '#f3903f',\n                name: 'low',\n              },\n              {\n                from: -1,\n                to: 1,\n                color: '#fff33b',\n                name: 'medium',\n              },\n              {\n                from: 2,\n                to: 5,\n                color: '#1bf118',\n                name: 'high',\n              },\n              {\n                from: 6,\n                to: 11,\n                color: '#31db92',\n                name: 'very high',\n              },\n              {\n                from: 12,\n                to: 30,\n                color: '#1c6ff8',\n                name: 'extremely high',\n              }]\n            }\n          }\n        },\n\n        series: series,\n        xaxis:{\n          categories,\n        },\n        chart: {\n          height: 450,\n          type: 'heatmap',\n        },\n        dataLabels: {\n          enabled: false\n        },\n        colors: [\"#808080\"],\n        title: {\n          text: 'Dailies of past 7 days'\n        },\n      }\n\n      var chart = new ApexCharts(document.querySelector(\"#chart\"), options);\n      chart.render();\n\n    },\n    \n\n\n    // Utility Functions\n    \n    pastDays(){\n      // Return the 7 past days\n      var pastDays= [];\n      var i;\n\n      for(i = 1; i < 8 ; i++){\n        var date= new Date();\n        var pastDate = date.getDate() - i;\n        date.setDate(pastDate);\n        pastDays.push(date);\n      }\n      return pastDays;\n    },\n\n    pastWeek(){\n      // return the date 7 days prior\n      var ourDate = new Date();\n\n      //Change it so that it is 7 days in the past.\n      var pastDate = ourDate.getDate() - 7;\n      ourDate.setDate(pastDate);\n      return ourDate;\n    },\n\n    sameDay(d1, d2) {\n      return d1.getFullYear() === d2.getFullYear() &&\n        d1.getMonth() === d2.getMonth() &&\n        d1.getDate() === d2.getDate();\n    },\n    formatDate(date){\n      const months = [\"Jan\", \"Feb\", \"Mar\",\"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n      let formatted_date = date.getDate() + \"-\" + months[date.getMonth()] + \"-\" + date.getFullYear()\n      return formatted_date;\n    },\n  }\n}\n\n    \n\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.main{\n  padding: 0.5em\n}\nlabel{\n  padding: 1em\n}\n.form{\n  padding: 0.2em\n}\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n"],"sourceRoot":""}]}